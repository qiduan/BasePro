var Game=function(){function e(){}var t=__define,n=e;n.prototype;return t(e,"MsgManager",function(){return MsgManager.getInstance()}),t(e,"Http",function(){return Http.getInstance()}),t(e,"SceneManager",function(){return SceneManager.getInstance()}),t(e,"SoundManager",function(){return SoundManager.getInstance()}),t(e,"EventManager",function(){return EventManager.getInstance()}),t(e,"DebugUtils",function(){return DebugUtils.getInstance()}),t(e,"TimerManager",function(){return TimerManager.getInstance()}),t(e,"DeviceUtils",function(){return DeviceUtils.getInstance()}),t(e,"StageUtils",function(){return StageUtils.getInstance()}),t(e,"ResourceUtils",function(){return ResourceUtils.getInstance()}),e}();egret.registerClass(Game,"Game");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},i.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),Game.DeviceUtils.IsPC?Game.StageUtils.setScaleMode(egret.StageScaleMode.EXACT_FIT):Game.DeviceUtils.IsMobile&&Game.StageUtils.setScaleMode(egret.StageScaleMode.EXACT_FIT),Game.DebugUtils.setOpen(!0),Game.Http.initServer("http://h5future.com/ADemo/relay.php"),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onConfigComplete=function(){var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},i.onThemeLoadComplete=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,this),RES.loadGroup("LoadingScene")},t.onResourceLoadComplete=function(e){var t=e.groupName;switch(t){case"LoadingScene":Game.SceneManager.runScene(SceneConstant.LoadingScene)}},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var AssetAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?i(r):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var MergeJsonAnalyzer=function(e){function t(){e.apply(this,arguments),this.mergeJsons=["MergeConfig_json"]}__extends(t,e);var n=(__define,t),i=n.prototype;return i.analyzeData=function(e,t){var n=e.name;if(!this.fileDic[n]&&t)try{var i=JSON.parse(t);if(-1!=this.mergeJsons.indexOf(n))for(var r in i)this.fileDic[r]=i[r];else this.fileDic[n]=i}catch(s){egret.$warn(1017,e.url,t)}},t}(RES.JsonAnalyzer);egret.registerClass(MergeJsonAnalyzer,"MergeJsonAnalyzer");var ThemeAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getTheme=function(e,t,n,i){function r(e){t.call(i,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var BaseClass=function(){function e(){}var t=(__define,e);t.prototype;return e.getInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=this;if(!n._instance){var i=e.length;0==i?n._instance=new n:1==i?n._instance=new n(e[0]):2==i?n._instance=new n(e[0],e[1]):3==i?n._instance=new n(e[0],e[1],e[2]):4==i?n._instance=new n(e[0],e[1],e[2],e[3]):5==i&&(n._instance=new n(e[0],e[1],e[2],e[3],e[4]))}return n._instance},e}();egret.registerClass(BaseClass,"BaseClass");var BaseScene=function(e){function t(){e.call(this),this.partJson={}}__extends(t,e);var n=(__define,t),i=n.prototype;return i.initSkin=function(e){this.skinName=Global.skinPath+e+"Skin.exml",this.once(eui.UIEvent.CREATION_COMPLETE,this.onCreateComplete,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},i.partAdded=function(t,n){Log.trace("加载组件===>"+t),e.prototype.partAdded.call(this,t,n),this.partJson[t]=n},i.onCreateComplete=function(){Log.trace(this.skinName+"组件加载完成舞台")},i.onAddToStage=function(){Log.trace(this.skinName+"加入舞台"),this.callBack()},i.onRemoveFromStage=function(){Log.trace(this.skinName+"移除舞台")},i.onEnter=function(){},i.onExit=function(){},t}(eui.Component);egret.registerClass(BaseScene,"BaseScene");var EventConstant=function(){function e(){}var t=(__define,e);t.prototype;return e.Login="login",e}();egret.registerClass(EventConstant,"EventConstant");var SceneConstant;!function(e){e[e.LoadingScene=1]="LoadingScene",e[e.MainScene=2]="MainScene",e[e.LoginScene=3]="LoginScene"}(SceneConstant||(SceneConstant={}));var EventManager=function(e){function t(){e.call(this),this.eventDis=new egret.EventDispatcher}__extends(t,e);var n=(__define,t),i=n.prototype;return i.dispatcherWith=function(e,t){console.log("fasong"),this.eventDis.dispatchEventWith(e,!1,t)},i.addELS=function(e,t,n){this.eventDis.addEventListener(e,t,n)},i.removeELS=function(e,t,n){this.eventDis.removeEventListener(e,t,n)},t}(BaseClass);egret.registerClass(EventManager,"EventManager");var MsgManager=function(e){function t(){e.call(this),this.json=new URLVariables}__extends(t,e);var n=(__define,t),i=n.prototype;return i.send=function(e,t){this.json.variables=t,Game.Http.send(e,this.json)},t}(BaseClass);egret.registerClass(MsgManager,"MsgManager");var SceneManager=function(e){function t(){e.call(this),this._scenes={}}__extends(t,e);var n=(__define,t),i=n.prototype;return i.clear=function(){var e=this._scenes[this._currScene];e&&(e.onExit(),this._currScene=void 0),this._scenes={}},i.register=function(e,t){this._scenes[e]=t},i.runScene=function(e){var t=this._scenes[e];if(null==t){Log.trace("场景"+SceneConstant[e]+"不存在,注册一个场景");var n=egret.getDefinitionByName(SceneConstant[e]),i=new n(SceneConstant[e]);this.register(e,i),t=this._scenes[e]}var r=this._scenes[this._currScene];r&&r.onExit(),t.onEnter(),this._currScene=e},i.getCurrScene=function(){return this._currScene},t}(BaseClass);egret.registerClass(SceneManager,"SceneManager");var SoundManager=function(e){function t(){e.call(this),this.soundList={}}__extends(t,e);var n=(__define,t),i=n.prototype;return i.playEffectSound=function(e){if(this.soundList[e])this.soundList[e].play();else{var t=e+"_mp3",n=new Sound(t,egret.Sound.EFFECT);this.soundList[e]=n,n.play(!1)}},i.playMusicSound=function(e){if(this.soundList[e])this.soundList[e].play();else{var t=e+"_mp3",n=new Sound(t,egret.Sound.MUSIC);this.soundList[e]=n,n.play(!1)}},t}(BaseClass);egret.registerClass(SoundManager,"SoundManager");var TimerManager=function(e){function t(){e.call(this),this._handlers=new Array,this._delHandlers=new Array,this._currTime=egret.getTimer(),this._currFrame=0,this._count=0,this._timeScale=1,egret.startTick(this.onEnterFrame,this)}__extends(t,e);var n=__define,i=t,r=i.prototype;return r.setTimeScale=function(e){this._timeScale=e},r.onEnterFrame=function(e){this._currFrame++,this._currTime=egret.getTimer(),Game.DebugUtils.start("TimerManager:");for(var t=0;t<this._count;t++){var n=this._handlers[t],i=n.userFrame?this._currFrame:this._currTime;i>=n.exeTime&&(Game.DebugUtils.start(n.method.toString()),n.method.call(n.methodObj,(this._currTime-n.dealTime)*this._timeScale),Game.DebugUtils.stop(n.method.toString()),n.dealTime=this._currTime,n.exeTime+=n.delay,n.repeat||(n.repeatCount>1?n.repeatCount--:(n.complateMethod&&n.complateMethod.apply(n.complateMethodObj),this._delHandlers.push(n))))}for(;this._delHandlers.length;){var n=this._delHandlers.pop();this.remove(n.method,n.methodObj)}return Game.DebugUtils.stop("TimerManager:"),!0},r.create=function(e,t,n,i,r,s,o){if(!(0>t||0>n||null==i)){this.remove(i,r);var a=ObjectPool.pop("TimerHandler");a.userFrame=e,a.repeat=0==n,a.repeatCount=n,a.delay=t,a.method=i,a.methodObj=r,a.complateMethod=s,a.complateMethodObj=o,a.exeTime=t+(e?this._currFrame:this._currTime),a.dealTime=this._currTime,this._handlers.push(a),this._count++}},r.doTimer=function(e,t,n,i,r,s){void 0===r&&(r=null),void 0===s&&(s=null),this.create(!1,e,t,n,i,r,s)},r.doFrame=function(e,t,n,i,r,s){void 0===r&&(r=null),void 0===s&&(s=null),this.create(!0,e,t,n,i,r,s)},n(r,"count",function(){return this._count}),r.remove=function(e,t){for(var n=0;n<this._count;n++){var i=this._handlers[n];if(i.method==e&&i.methodObj==t){this._handlers.splice(n,1),ObjectPool.push(i),this._count--;break}}},r.removeAll=function(e){for(var t=0;t<this._count;t++){var n=this._handlers[t];n.methodObj==e&&(this._handlers.splice(t,1),ObjectPool.push(n),this._count--,t--)}},r.isExists=function(e,t){for(var n=0;n<this._count;n++){var i=this._handlers[n];if(i.method==e&&i.methodObj==t)return!0}return!1},t}(BaseClass);egret.registerClass(TimerManager,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}var t=(__define,e),n=t.prototype;return n.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},e}();egret.registerClass(TimerHandler,"TimerHandler");var LoginCtrl=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.loginIn=function(e){Game.MsgManager.send(EventConstant.Login,e)},i.loginOut=function(){},t}(BaseClass);egret.registerClass(LoginCtrl,"LoginCtrl");var Player=function(){function e(){}var t=__define,n=e,i=n.prototype;return t(i,"atk",function(){return this._atk},function(e){this._atk=e}),t(i,"def",function(){return this._def},function(e){this._def=e}),t(i,"crt",function(){return this._crt},function(e){this._crt=e}),t(i,"hp",function(){return this._hp},function(e){this._hp=e}),t(i,"mp",function(){return this._mp},function(e){this._mp=e}),t(i,"dod",function(){return this._dod},function(e){this._dod=e}),t(i,"headId",function(){return this._headId},function(e){this._headId=e}),t(i,"level",function(){return this._level},function(e){this._level=e}),t(i,"exp",function(){return this._exp},function(e){this._exp=e}),t(i,"spirit",function(){return this._spirit},function(e){this._spirit=e}),t(i,"gold",function(){return this._gold},function(e){this._gold=e}),t(i,"diamonds",function(){return this._diamonds},function(e){this._diamonds=e}),e}();egret.registerClass(Player,"Player");var MainPlayer=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.initData=function(e){},t}(Player);egret.registerClass(MainPlayer,"MainPlayer");var CacheData=function(){function e(){this.dataList={}}var t=(__define,e),n=t.prototype;return n.update=function(e,t){this.dataList[e]=t},n.getCache=function(e){return null==this.dataList[e]?null:this.dataList[e]},e}();egret.registerClass(CacheData,"CacheData");var Http=function(e){function t(){e.call(this),this._data=new CacheData,this._cache=[],this._request=new egret.URLRequest;var t=new egret.URLRequestHeader("Access-Control-Allow-Origin","*");this._request.requestHeaders.push(t),this._request.method=egret.URLRequestMethod.POST,this._urlLoader=new egret.URLLoader,this._urlLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this)}__extends(t,e);var n=__define,i=t,r=i.prototype;return r.initServer=function(e){this._serverUrl=e},n(r,"Data",function(){return this._data}),r.onError=function(e){this.nextPost()},r.send=function(e,t){this._cache.push([e,t]),this.post()},r.post=function(){if(!this._isRequesting&&0!=this._cache.length){var e=this._cache.shift(),t=e[0],n=e[1];this._type=t,this._request.url=this._serverUrl,this._request.data=n,Log.trace("请求数据",JSON.stringify(JSON.parse(JSON.stringify(n)).variables)),this._urlLoader.addEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this),this._urlLoader.load(this._request),this._isRequesting=!0}},r.onLoaderComplete=function(e){this._urlLoader.removeEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this),Log.trace(this._urlLoader.data);var t=JSON.parse(this._urlLoader.data);t.hasOwnProperty("status")&&1!=t.status?Log.trace("Http错误:"+t.status,t.msg):(this._data.update(this._type,t),Log.trace("缓存的数据:===>",this._data.getCache(this._type).status),Game.EventManager.dispatcherWith(this._type,t)),this.nextPost()},r.nextPost=function(){this._isRequesting=!1,this.post()},t}(BaseClass);egret.registerClass(Http,"Http");var LoadingScene=function(e){function t(){e.call(this),this.callBack=this.loadGroup,e.prototype.initSkin.call(this,"LoadingScene")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.loadGroup=function(){var e=new Animator("loadRun","loadRun");this.addChild(e._mc),e.play(!0),Helper.setCenter(e._mc),e._mc.y=390,Game.ResourceUtils.loadGroup("MainScene",this.onResourceLoadComplete,this.onResourceLoadProgress,this)},i.onResourceLoadComplete=function(){Game.SceneManager.runScene(SceneConstant.LoginScene)},i.onResourceLoadProgress=function(e,t){this.setProgress(e,t)},i.setProgress=function(e,t){var n=Math.ceil(e/t*100);this.partJson.spLoadFrg.width=Math.ceil(e/t*667),this.partJson.lbLoad.text=n+"%"},i.onEnter=function(){Game.StageUtils.getUIStage().addChild(this),Log.trace(Game.StageUtils.getUIStage().width,Game.StageUtils.getUIStage().height)},i.onExit=function(){Game.StageUtils.getUIStage().removeChild(this)},t}(BaseScene);egret.registerClass(LoadingScene,"LoadingScene");var LoginScene=function(e){function t(){e.call(this),this.callBack=this.initUI,e.prototype.initSkin.call(this,"LoginScene")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.initUI=function(){this.addEventLis(),Log.trace("初始化LoginScene数据")},i.addEventLis=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),Game.EventManager.addELS(EventConstant.Login,this.isLogin,this)},i.removeEventLis=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),Game.EventManager.removeELS(EventConstant.Login,this.isLogin,this)},i.onClick=function(e){switch(e.target){case this.partJson.lbLogin:this.loginEvent()}},i.loginEvent=function(){var e=this.partJson.edtUserName.text,t=this.partJson.edtPassword.text;return null==e?void alert("用户名不能为空"):null==t?void alert("密码不能为空"):void LoginCtrl.getInstance().loginIn({act:EventConstant.Login,userName:e,passWord:t})},i.isLogin=function(e){Log.trace("登录返回的数据==>",e.data)},i.onEnter=function(){Game.StageUtils.getUIStage().addChild(this)},i.onExit=function(){this.removeEventLis(),Game.StageUtils.getUIStage().removeChild(this)},t}(BaseScene);egret.registerClass(LoginScene,"LoginScene");var log=egret.log,URLVariables=egret.URLVariables,MainScene=function(e){function t(){e.call(this),this.callBack=this.initUI,e.prototype.initSkin.call(this,"MainScene")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.initUI=function(){this.addEventLis(),Log.trace("初始化MainScene数据")},i.refrushUI=function(e){},i.addEventLis=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.removeEventLis=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.onClick=function(e){e.target},i.onEnter=function(){Log.trace("MainScene加入显示列表"),Game.StageUtils.getUIStage().addChild(this)},i.onExit=function(){this.removeEventLis(),Game.StageUtils.getUIStage().removeChild(this)},t}(BaseScene);egret.registerClass(MainScene,"MainScene");var Mod=function(e){function t(){e.call(this),this.callBack=this.initUI,e.prototype.initSkin.call(this,"LoginScene")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.initUI=function(){this.addEventLis(),Log.trace("初始化LoginScene数据")},i.addEventLis=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.removeEventLis=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.onClick=function(e){e.target},i.onEnter=function(){Log.trace("MainScene加入显示列表"),Game.StageUtils.getUIStage().addChild(this)},i.onExit=function(){this.removeEventLis(),Game.StageUtils.getUIStage().removeChild(this)},t}(BaseScene);egret.registerClass(Mod,"Mod");var Animator=function(){function e(e,t){this.initAni(e,t)}var t=(__define,e),n=t.prototype;return n.initAni=function(e,t){var n=e+"_json",i=e+"_png",r=RES.getRes(n),s=RES.getRes(i);Global._mcFactory.mcDataSet=r,Global._mcFactory.texture=s,this._mc=new egret.MovieClip(Global._mcFactory.generateMovieClipData(t))},n.play=function(e){e?this._mc.play(-1):this._mc.play(1)},n.setFrameRate=function(e){this._mc.frameRate=e},e}();egret.registerClass(Animator,"Animator");var DebugUtils=function(e){function t(){e.call(this),this._threshold=3,this._startTimes={}}__extends(t,e);var n=__define,i=t,r=i.prototype;return r.setOpen=function(e){this._isOpen=e},n(r,"isDebug",function(){return this._isOpen}),r.start=function(e){this._isOpen&&(this._startTimes[e]=egret.getTimer())},r.stop=function(e){if(!this._isOpen)return 0;if(!this._startTimes[e])return 0;var t=egret.getTimer()-this._startTimes[e];return t>this._threshold&&Log.trace(e+": "+t),t},r.setThreshold=function(e){this._threshold=e},t}(BaseClass);egret.registerClass(DebugUtils,"DebugUtils");var DeviceUtils=function(e){function t(){e.call(this)}__extends(t,e);var n=__define,i=t,r=i.prototype;return n(r,"IsHtml5",function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB}),n(r,"IsNative",function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE}),n(r,"IsMobile",function(){return egret.Capabilities.isMobile}),n(r,"IsPC",function(){return!egret.Capabilities.isMobile}),n(r,"IsQQBrowser",function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")}),n(r,"IsIEBrowser",function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")}),n(r,"IsFirefoxBrowser",function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")}),n(r,"IsChromeBrowser",function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")}),n(r,"IsSafariBrowser",function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")}),n(r,"IsOperaBrowser",function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")}),t}(BaseClass);egret.registerClass(DeviceUtils,"DeviceUtils");var Global=function(){function e(){}var t=(__define,e);t.prototype;return e.initShare=function(){var t=window.location.href;t=t.split("#")[0];var n=e.LenEncodeUlr(t),i=e.ServerUrl+"interface.php?act=getSignPackage&shareUrl="+n,r=new egret.URLLoader,s=new egret.URLRequest(i);r.load(s),s.method=egret.URLRequestMethod.POST,r.addEventListener(egret.Event.COMPLETE,function(e){var t=JSON.parse(e.target.data),n=new BodyConfig;n.debug=!0,n.appId=t.appId,n.timestamp=t.timestamp,n.nonceStr=t.nonceStr,n.signature=t.signature,n.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],wx.config(n),wx.error(function(e){console.log(e)})},this)},e.setShareInfo=function(){var t=e.shareTitle,n=e.shareContent,i=e.shareLink,r=e.shareImg;wx.ready(function(){var s=new BodyMenuShareAppMessage;s.desc=n,s.title=t,s.link=i,s.imgUrl=r,s.trigger=function(){},s.success=function(){},s.cancel=function(){},wx.onMenuShareAppMessage(s);var o=new BodyMenuShareTimeline;o.title=e.shareTimelineTitle,o.link=i,o.imgUrl=r,o.success=function(){},wx.onMenuShareTimeline(o)})},e.LenEncodeUlr=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.skinPath="resource/skins/scene/",e._mcFactory=new egret.MovieClipDataFactory,e.ServerUrl="服务器地址",e.shareTitle="分享好友的标题",e.shareContent="分享好友的内容",e.shareLink="分享的链接",e.shareImg=e.ServerUrl+"share.png",e.shareTimelineTitle="分享朋友圈的标题",e}();egret.registerClass(Global,"Global");var Helper=function(){function e(){}var t=(__define,e);t.prototype;return e.setAnchor=function(e,t,n){e.anchorOffsetX=e.width*t,e.anchorOffsetY=e.height*n,e.x=e.x+e.anchorOffsetX,e.y=e.y+e.anchorOffsetY},e.setCenter=function(e){e.x=(Game.StageUtils.getUIStage().width-e.width)/2,e.y=(Game.StageUtils.getUIStage().height-e.height)/2},e}();egret.registerClass(Helper,"Helper");var Log=function(){function e(){}var t=(__define,e);t.prototype;return e.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];Game.DebugUtils.isDebug&&(e[0]="[DebugLog]"+e[0],console.log.apply(console,e))},e}();egret.registerClass(Log,"Log");var ObjectPool=function(){function e(){this._objs=new Array}var t=(__define,e),n=t.prototype;return n.pushObj=function(e){this._objs.push(e)},n.popObj=function(){return this._objs.length>0?this._objs.pop():null},n.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e._content[t]||(e._content[t]=[]);var r=e._content[t];if(r.length)return r.pop();var s,o=egret.getDefinitionByName(t),a=n.length;return 0==a?s=new o:1==a?s=new o(n[0]):2==a?s=new o(n[0],n[1]):3==a?s=new o(n[0],n[1],n[2]):4==a?s=new o(n[0],n[1],n[2],n[3]):5==a&&(s=new o(n[0],n[1],n[2],n[3],n[4])),s.ObjectPoolKey=t,s},e.popWithExtraKey=function(t,n){e._content[t]||(e._content[t]=[]);var i,r=e._content[t];if(r.length)for(var s=0;s<r.length;s++)if(r[s].extraKey==n){i=r[s],r.splice(s,1);break}if(!i){var o=egret.getDefinitionByName(t);i=new o(n),i.extraKey=n,i.ObjectPoolKey=t}return i},e.push=function(t){if(null==t)return!1;var n=t.ObjectPoolKey;return e._content[n]?(e._content[n].push(t),!0):!1},e.clear=function(){e._content={}},e.clearClass=function(t,n){void 0===n&&(n=null);for(var i=e._content[t];i&&i.length;){var r=i.pop();n&&r[n](),r=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,n){var i=e._content[t];if(null!=i){var r=0,s=i.length;for(r;s>r;r++)i[r][n]()}},e._content={},e}();egret.registerClass(ObjectPool,"ObjectPool");var ResourceUtils=function(e){function t(){e.call(this),this._groupIndex=0,this._configs=new Array,this._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.addConfig=function(e,t){this._configs.push([e,t])},i.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},i.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},i.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},i.loadGroup=function(e,t,n,i){this._groups[e]=[t,n,i],RES.loadGroup(e)},i.loadGroups=function(e,t,n,i,r){RES.createGroup(e,t,!0),this.loadGroup(e,n,i,r)},i.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var n="pilferer_"+e;t||(t=[e]),RES.createGroup(n,t,!0),RES.loadGroup(n,-1)},i.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][0],i=this._groups[t][2];null!=n&&n.call(i),this._groups[t]=null,delete this._groups[t]}},i.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][1],i=this._groups[t][2];null!=n&&n.call(i,e.itemsLoaded,e.itemsTotal)}},i.onResourceLoadError=function(e){Log.trace(e.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(e)},i.loadResource=function(e,t,n,i,r){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null);var s=e.concat(t),o="loadGroup"+this._groupIndex++;RES.createGroup(o,s,!0),this._groups[o]=[n,i,r],RES.loadGroup(o)},t}(BaseClass);egret.registerClass(ResourceUtils,"ResourceUtils");var Sound=function(){function e(e,t){this.initSound(t,e)}var t=(__define,e),n=t.prototype;return n.initSound=function(e,t){this.sound=RES.getRes(t),this.sound.type=e},n.play=function(e){this.stop(),e?this.channel=this.sound.play(0,-1):this.channel=this.sound.play(0,1)},n.stop=function(){this.channel&&(this.channel.stop(),this.channel=null)},e}();egret.registerClass(Sound,"Sound");var StageUtils=function(e){function t(){e.call(this),null==t._uiStage&&(t._uiStage=new eui.UILayer,t._uiStage.percentHeight=100,t._uiStage.percentWidth=100,this.getStage().addChild(t._uiStage))}__extends(t,e);var n=(__define,t),i=n.prototype;return i.getHeight=function(){return this.getStage().stageHeight},i.getWidth=function(){return this.getStage().stageWidth},i.setTouchChildren=function(e){this.getStage().touchChildren=e},i.setMaxTouches=function(e){this.getStage().maxTouches=e},i.setFrameRate=function(e){this.getStage().frameRate=e},i.setScaleMode=function(e){this.getStage().scaleMode=e},i.getStage=function(){return egret.MainContext.instance.stage},i.getUIStage=function(){return t._uiStage},t}(BaseClass);egret.registerClass(StageUtils,"StageUtils");